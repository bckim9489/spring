ALTER TABLE STUDENT.IS_BBSCTT
 DROP PRIMARY KEY CASCADE;

DROP TABLE STUDENT.IS_BBSCTT CASCADE CONSTRAINTS;

CREATE TABLE STUDENT.IS_BBSCTT
(
  BBS_ID              VARCHAR2(20 BYTE)         NOT NULL,
  BBSCTT_SN           NUMBER(9)                 NOT NULL,
  TITLE               VARCHAR2(100 BYTE)        NOT NULL,
  CONTENTS            CLOB,
  SEX_CD              VARCHAR2(10 BYTE),
  AGE                 VARCHAR2(100 BYTE),
  JOB                 VARCHAR2(100 BYTE),
  WRTER_NAME          VARCHAR2(100 BYTE),
  TEL                 VARCHAR2(100 BYTE),
  EMAIL               VARCHAR2(100 BYTE),
  HMPG                VARCHAR2(200 BYTE),
  RDCNT               NUMBER(5)                 DEFAULT '0'                   NOT NULL,
  PASSWD              VARCHAR2(100 BYTE),
  NOTICE_YN           CHAR(1 BYTE)              DEFAULT 'N'                   NOT NULL,
  OPEN_YN             CHAR(1 BYTE)              DEFAULT 'N'                   NOT NULL,
  HTML_TAG_YN         CHAR(1 BYTE)              DEFAULT 'N'                   NOT NULL,
  BEST_BBSCTT_SN      NUMBER(9),
  UP_BBSCTT_SN        NUMBER(9),
  ANSWER_CNT          NUMBER(9)                 DEFAULT '0'                   NOT NULL,
  ANSWER_DP           NUMBER(5)                 DEFAULT '0'                   NOT NULL,
  IP                  VARCHAR2(20 BYTE)         NOT NULL,
  NTCE_START_DATE     VARCHAR2(8 BYTE),
  NTCE_END_DATE       VARCHAR2(8 BYTE),
  DELETE_YN           CHAR(1 BYTE)              NOT NULL,
  REG_DTIME           DATE                      DEFAULT sysdate               NOT NULL,
  REG_USER_SN         NUMBER(9)                 DEFAULT NULL,
  LCHG_DTIME          DATE,
  LCHG_USER_SN        NUMBER(9),
  ORGINL_BBS_ID       VARCHAR2(20 BYTE),
  ORGINL_BBSCTT_SN    NUMBER(9),
  ADDR                VARCHAR2(300 BYTE),
  BBSCTT_CLS_SN       NUMBER(9),
  GRP_NAME            VARCHAR2(100 BYTE),
  HOPE_PD             VARCHAR2(300 BYTE),
  NMPR                NUMBER(5),
  STTEMNT_WARD_NAME   VARCHAR2(50 BYTE),
  STTEMNT_TRGET_NAME  VARCHAR2(100 BYTE),
  WARD_ID             VARCHAR2(7 BYTE)
)
LOB (CONTENTS) STORE AS (
  TABLESPACE  ST_DATA
  ENABLE      STORAGE IN ROW
  CHUNK       8192
  RETENTION
  NOCACHE
  LOGGING
      STORAGE    (
                  INITIAL          64K
                  MINEXTENTS       1
                  MAXEXTENTS       UNLIMITED
                  PCTINCREASE      0
                  BUFFER_POOL      DEFAULT
                 ))
TABLESPACE ST_DATA
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;

COMMENT ON TABLE STUDENT.IS_BBSCTT IS '게시글';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.BBS_ID IS '게시판ID';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.BBSCTT_SN IS '게시글일련번호';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.TITLE IS '제목';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.CONTENTS IS '내용';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.SEX_CD IS '성별';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.AGE IS '나이';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.JOB IS '직업';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.WRTER_NAME IS '작성자명';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.TEL IS '전화번호';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.EMAIL IS '이메일';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.HMPG IS '홈페이지';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.RDCNT IS '조회수';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.PASSWD IS '비밀번호';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.NOTICE_YN IS '공지글여부';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.OPEN_YN IS '공개여부';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.HTML_TAG_YN IS 'HTML태그여부';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.BEST_BBSCTT_SN IS '최상위게시글일련번호';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.UP_BBSCTT_SN IS '상위게시글일련번호';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.ANSWER_CNT IS '답변카운터';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.ANSWER_DP IS '답변깊이';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.IP IS 'IP';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.NTCE_START_DATE IS '게시시작일자';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.NTCE_END_DATE IS '게시종료일자';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.DELETE_YN IS '삭제여부';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.REG_DTIME IS '등록일시';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.REG_USER_SN IS '등록자일련번호';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.LCHG_DTIME IS '수정일시';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.LCHG_USER_SN IS '수정자일련번호';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.ORGINL_BBS_ID IS '원본게시판ID';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.ORGINL_BBSCTT_SN IS '원본게시글일련번호';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.ADDR IS '주소';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.BBSCTT_CLS_SN IS '게시글분류일련번호';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.GRP_NAME IS '단체명';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.HOPE_PD IS '희망교육기간';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.NMPR IS '인원';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.STTEMNT_WARD_NAME IS '신고서소명';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.STTEMNT_TRGET_NAME IS '신고대상명';

COMMENT ON COLUMN STUDENT.IS_BBSCTT.WARD_ID IS '서·센터ID';



CREATE INDEX STUDENT.IE1_IS_BBSCTT ON STUDENT.IS_BBSCTT
(ORGINL_BBS_ID, ORGINL_BBSCTT_SN)
LOGGING
TABLESPACE ST_DATA
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


CREATE INDEX STUDENT.IE2_IS_BBSCTT ON STUDENT.IS_BBSCTT
(NTCE_START_DATE, NTCE_END_DATE)
LOGGING
TABLESPACE ST_DATA
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


CREATE UNIQUE INDEX STUDENT.PK_IS_BBSCTT ON STUDENT.IS_BBSCTT
(BBS_ID, BBSCTT_SN)
LOGGING
TABLESPACE ST_DATA
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


ALTER TABLE STUDENT.IS_BBSCTT ADD (
  CONSTRAINT PK_IS_BBSCTT
  PRIMARY KEY
  (BBS_ID, BBSCTT_SN)
  USING INDEX STUDENT.PK_IS_BBSCTT
  ENABLE VALIDATE);

ALTER TABLE STUDENT.IS_BBSCTT ADD (
  CONSTRAINT FK_IS_BBS_IS_BBSCTT 
  FOREIGN KEY (BBS_ID) 
  REFERENCES STUDENT.IS_BBS (BBS_ID)
  ENABLE VALIDATE);
